"use strict";const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result,localStorage.setItem("data",JSON.stringify(data))}fileField.addEventListener("change",getImage);const elementLegend1=document.querySelector(".js-legendDesign"),elementLegend2=document.querySelector(".js-legendFill"),elementLegend3=document.querySelector(".js-legendShare"),elementSection1=document.querySelector(".js-sectionDesign"),elementSection2=document.querySelector(".js-sectionFill"),elementSection3=document.querySelector(".js-sectionShare"),elementIcon1=document.querySelector(".js-iconDesign"),elementIcon2=document.querySelector(".js-iconFill"),elementIcon3=document.querySelector(".js-iconShare"),labelPalettes=document.querySelectorAll(".js-labelPalette"),inputName=document.querySelector(".js-name"),inputOccupation=document.querySelector(".js-occupation"),phoneInput=document.querySelector(".js-fill_phone"),inputEmail=document.querySelector(".js-inputEmail"),inputLinkedin=document.querySelector(".js-inputLinkedin"),inputGitHub=document.querySelector(".js-inputGitHub"),cardName=document.querySelector(".js-cardName"),cardOccupation=document.querySelector(".js-cardOccupation"),phonePreview=document.querySelector(".js-phonePreview"),previewEmail=document.querySelector(".js-previewEmail"),borderPalette=document.querySelector(".js-borderPalette"),linksIcons=document.querySelectorAll(".js-linksIcons"),cardLinkedin=document.querySelector(".js-cardLinkedin"),cardGitHub=document.querySelector(".js-cardGitHub"),resetBtn=document.querySelector(".js-resetBtn"),shareBtn=document.querySelector(".js-shareBtn"),shareLink=document.querySelector(".js-shareLink"),shareDone=document.querySelector(".js-shareDone"),shareError=document.querySelector(".js-shareError"),shareTwitter=document.querySelector(".js-shareTwitter");let data={name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:"",palette:1};const dataLS=JSON.parse(localStorage.getItem("data"));if(dataLS&&(data=dataLS),inputName.value=data.name,""===data.name?cardName.innerHTML="Nombre Apellido":cardName.innerHTML=data.name.toLowerCase(),inputOccupation.value=data.job,""===data.job?cardOccupation.innerHTML="Front-end developer":cardOccupation.innerHTML=data.job.toLowerCase(),phoneInput.value=data.phone,""!==data.phone&&(phonePreview.href="tel:"+data.phone,phonePreview.title="Teléfono: "+data.phone),inputEmail.value=data.email,""!==data.email&&(previewEmail.href="mailto:"+data.email,previewEmail.title="Email: "+data.email),inputLinkedin.value=data.linkedin,""!==data.linkedin&&(cardLinkedin.href=data.linkedin,cardLinkedin.title="LinkedIn: "+data.linkedin),inputGitHub.value=data.github,""!==data.github&&(cardGitHub.href=data.github,cardGitHub.title="GitHub: "+data.github),""!==data.photo&&(profileImage.style.backgroundImage=`url(${data.photo})`,profilePreview.style.backgroundImage=`url(${data.photo})`),2===data.palette){setPalette2();document.querySelector("#palette2").checked=!0}else if(3===data.palette){setPalette3();document.querySelector("#palette3").checked=!0}function handlerClickLegend(){elementSection1.classList.toggle("hidden"),elementSection1.classList.contains("hidden")?(elementIcon1.classList.remove("fa-chevron-up"),elementIcon1.classList.add("fa-chevron-down")):(elementIcon1.classList.remove("fa-chevron-down"),elementIcon1.classList.add("fa-chevron-up"),elementSection2.classList.add("hidden"),elementIcon2.classList.remove("fa-chevron-up"),elementIcon2.classList.add("fa-chevron-down"),elementSection3.classList.add("hidden"),elementIcon3.classList.remove("fa-chevron-up"),elementIcon3.classList.add("fa-chevron-down"))}function handlerClickLegend2(){elementSection2.classList.toggle("hidden"),elementSection2.classList.contains("hidden")?(elementIcon2.classList.remove("fa-chevron-up"),elementIcon2.classList.add("fa-chevron-down")):(elementIcon2.classList.remove("fa-chevron-down"),elementIcon2.classList.add("fa-chevron-up"),elementSection1.classList.add("hidden"),elementIcon1.classList.remove("fa-chevron-up"),elementIcon1.classList.add("fa-chevron-down"),elementSection3.classList.add("hidden"),elementIcon3.classList.remove("fa-chevron-up"),elementIcon3.classList.add("fa-chevron-down"))}function handlerClickLegend3(){elementSection3.classList.toggle("hidden"),elementSection3.classList.contains("hidden")?(elementIcon3.classList.remove("fa-chevron-up"),elementIcon3.classList.add("fa-chevron-down")):(elementIcon3.classList.remove("fa-chevron-down"),elementIcon3.classList.add("fa-chevron-up"),elementSection1.classList.add("hidden"),elementIcon1.classList.remove("fa-chevron-up"),elementIcon1.classList.add("fa-chevron-down"),elementSection2.classList.add("hidden"),elementIcon2.classList.remove("fa-chevron-up"),elementIcon2.classList.add("fa-chevron-down"));let e=0;for(const t in data)""!==data[t]&&"phone"!==t&&e++;7===e?(shareBtn.classList.remove("share__button--disabled"),shareBtn.disabled=!1):(shareBtn.classList.add("share__button--disabled"),shareBtn.disabled=!0)}function handlerInputName(){""===inputName.value?(data.name="",cardName.innerHTML="Nombre Apellido"):(data.name=inputName.value,cardName.innerHTML=data.name.toLowerCase()),localStorage.setItem("data",JSON.stringify(data))}function handlerInputOccupation(){""===inputOccupation.value?(data.job="",cardOccupation.innerHTML="Front-end developer"):(data.job=inputOccupation.value,cardOccupation.innerHTML=data.job.toLowerCase()),localStorage.setItem("data",JSON.stringify(data))}function handlerPreviewPhone(){data.phone=phoneInput.value,""===data.phone?(phonePreview.href="",phonePreview.title="Teléfono"):(phonePreview.href="tel:"+data.phone,phonePreview.title="Teléfono: "+data.phone),localStorage.setItem("data",JSON.stringify(data))}function handleKeyEmail(){data.email=inputEmail.value,""===data.email?(previewEmail.href="",previewEmail.title="Email"):(previewEmail.href="mailto:"+data.email,previewEmail.title="Email: "+data.email),localStorage.setItem("data",JSON.stringify(data))}function handlerInputLinkedin(){data.linkedin=inputLinkedin.value,""===data.linkedin?(cardLinkedin.href="",cardLinkedin.title="LinkedIn"):(cardLinkedin.href=data.linkedin,cardLinkedin.title="LinkedIn: "+data.linkedin),localStorage.setItem("data",JSON.stringify(data))}function handlerInputGitHub(){data.github=inputGitHub.value,""===data.github?(cardGitHub.href="",cardGitHub.title="GitHub"):(cardGitHub.href=data.github,cardGitHub.title="GitHub: "+data.github),localStorage.setItem("data",JSON.stringify(data))}function setPalette1(){data.palette=1,cardName.classList.remove("cards__title--palette2"),cardName.classList.remove("cards__title--palette3"),cardName.classList.add("cards__title--palette1"),cardOccupation.classList.remove("cards__subtitle--palette2"),cardOccupation.classList.remove("cards__subtitle--palette3"),cardOccupation.classList.add("cards__subtitle--palette1"),borderPalette.classList.remove("cards__wrapper--palette2"),borderPalette.classList.remove("cards__wrapper--palette3"),borderPalette.classList.add("cards__wrapper--palette1");for(const e of linksIcons)e.classList.remove("cards__link--palette2"),e.classList.remove("cards__link--palette3"),e.classList.add("cards__link--palette1");localStorage.setItem("data",JSON.stringify(data))}function setPalette2(){data.palette=2,cardName.classList.remove("cards__title--palette1"),cardName.classList.remove("cards__title--palette3"),cardName.classList.add("cards__title--palette2"),cardOccupation.classList.remove("cards__subtitle--palette1"),cardOccupation.classList.remove("cards__subtitle--palette3"),cardOccupation.classList.add("cards__subtitle--palette2"),borderPalette.classList.remove("cards__wrapper--palette1"),borderPalette.classList.remove("cards__wrapper--palette3"),borderPalette.classList.add("cards__wrapper--palette2");for(const e of linksIcons)e.classList.remove("cards__link--palette1"),e.classList.remove("cards__link--palette3"),e.classList.add("cards__link--palette2");localStorage.setItem("data",JSON.stringify(data))}function setPalette3(){data.palette=3,cardName.classList.remove("cards__title--palette1"),cardName.classList.remove("cards__title--palette2"),cardName.classList.add("cards__title--palette3"),cardOccupation.classList.remove("cards__subtitle--palette1"),cardOccupation.classList.remove("cards__subtitle--palette2"),cardOccupation.classList.add("cards__subtitle--palette3"),borderPalette.classList.remove("cards__wrapper--palette1"),borderPalette.classList.remove("cards__wrapper--palette2"),borderPalette.classList.add("cards__wrapper--palette3");for(const e of linksIcons)e.classList.remove("cards__link--palette1"),e.classList.remove("cards__link--palette2"),e.classList.add("cards__link--palette3");localStorage.setItem("data",JSON.stringify(data))}function handlerClickPalette(e){"palette1"===e.currentTarget.id?setPalette1():"palette2"===e.currentTarget.id?setPalette2():"palette3"===e.currentTarget.id&&setPalette3()}elementLegend1.addEventListener("click",handlerClickLegend),elementLegend2.addEventListener("click",handlerClickLegend2),elementLegend3.addEventListener("click",handlerClickLegend3),inputName.addEventListener("input",handlerInputName),inputOccupation.addEventListener("keyup",handlerInputOccupation),phoneInput.addEventListener("keyup",handlerPreviewPhone),inputEmail.addEventListener("keyup",handleKeyEmail),inputLinkedin.addEventListener("keyup",handlerInputLinkedin),inputGitHub.addEventListener("keyup",handlerInputGitHub);for(const e of labelPalettes)e.addEventListener("click",handlerClickPalette);function handleResetBtn(){inputName.value="",data.name="",cardName.innerHTML="Nombre Apellido",inputOccupation.value="",data.job="",cardOccupation.innerHTML="Front-end developer",data.phone="",phoneInput.value="",phonePreview.href="",phonePreview.title="Teléfono",data.email="",inputEmail.value="",previewEmail.href="",previewEmail.title="Email",data.linkedin="",inputLinkedin.value="",cardLinkedin.href="",cardLinkedin.title="LinkedIn",data.github="",inputGitHub.value="",cardGitHub.href="",cardGitHub.title="GitHub",data.photo="",profileImage.style.backgroundImage="url(./assets/images/profile-image.svg)",profilePreview.style.backgroundImage="none",setPalette1(),elementSection1.classList.add("hidden"),handlerClickLegend(),localStorage.removeItem("data")}function handlerClickShare(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"content-Type":"application/json"}}).then(e=>e.json()).then(e=>{!0===e.success?(shareLink.innerHTML="Haz click aquí para ver tu tarjeta",shareLink.href=e.cardURL,shareDone.classList.remove("hidden"),shareError.classList.add("hidden"),shareTwitter.href="https://twitter.com/intent/tweet?text=He%20creado%20mi%20tarjeta%20de%20visita%20gracias%20a%20%23TeamUndefined:%20"+e.cardURL):(shareDone.classList.add("hidden"),shareError.classList.remove("hidden"))})}resetBtn.addEventListener("click",handleResetBtn),shareBtn.addEventListener("click",handlerClickShare);